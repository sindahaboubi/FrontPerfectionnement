<app-menu-admin class="menu"></app-menu-admin>
<h1 class="titrepage"><i class="fa-solid fa-users-between-lines"></i> Tous les encadrants ({{encadrants.length}}) </h1>
 
<div class="wrap">
  <div class="search">
     <input type="text" [(ngModel)]="val" class="searchTerm" placeholder="Rechercher">
     <button type="submit" class="searchButton">
       <i class="fa fa-search"></i>
    </button>
  </div>
</div>

<button class="btnajout" (click)="onOpenModal('addEnc')"><i class="fa-solid fa-user-plus"></i>  Ajouter un encadrant</button>


<div class="hm-gradient">
  <main>
      <div class="container mt-4">
          <div class="card mb-4">
              <div class="card-body">
                  <table class="table table-striped">
                      <thead> 
                          <tr>
                              <th>ID</th>
                              <th>Nom et prénom</th>
                              <th>E-mail</th>
                              <th>Numéro de téléphone</th>
                              <th>CIN</th>
                              <th>Spécialité</th> 
                              <th>Direction</th>
                              <th>Adresse</th>
                              <th>Actions</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let encadrant of encadrants | filter:val" class="ligne" >
                              <th>{{encadrant.id}}</th>
                              <td>{{encadrant.nom}} {{encadrant.prenom}}</td>
                              <td>{{encadrant.email}}</td>
                              <td>{{encadrant.tel}}</td>
                              <td>{{encadrant.cin}}</td>
                              <td>{{encadrant.specialite}}</td> 
                              <td>
                                <span *ngFor="let d of directions">
                                  <span *ngIf="d.id==encadrant.dir" class="categorie">{{d.libelle}}</span>
                               </span>  
                              </td>
                              <td>{{encadrant.adresse}}</td> 
                              <td> 
                                  <i (click)="onOpen(encadrant, 'delete')" id="supprimer" class="fa-solid fa-trash-can"></i>  
                              </td>  
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
  </main>
  <div class="container" id="main-container">
    <br>
  <div class="container" id="main-container">
    
      <!-- inscrire Modal -->
      <div class="modal fade" id="addEncModal" tabindex="-1" role="dialog" aria-labelledby="addEncModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title" id="addEncModalLabel">Ajouter un encadrant</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                  </button>
              </div>
              <div class="modal-body">
                  <app-inscription-enc></app-inscription-enc>
              </div>
          </div>
          </div>
      </div>
  </div>
    
    
     <!-- Delete Modal -->
     <div class="modal fade" id="deleteEncadrantModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
         <div class="modal-content">
            <div class="modal-header">
               <h5 class="modal-title" id="deleteModelLabel">Confirmation de la suppression</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
               </button> 
            </div>
            <div class="modal-body">
               <p>Etes-vous sûr de vouloir supprimer le stagiaire {{deleteEncadrant?.nom}} {{deleteEncadrant?.prenom}} ?</p>
               <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
                  <button class="btn btn-danger" data-dismiss="modal" (click)="supprimer(deleteEncadrant.id)">Oui</button>
               </div>
            </div>
         </div>
      </div>
    </div>
    </div>
  </div>